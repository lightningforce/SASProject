****************************************************************;
******             DECISION TREE SCORING CODE             ******;
****************************************************************;
 
******         LENGTHS OF NEW CHARACTER VARIABLES         ******;
LENGTH I_TARGET_B  $   12;
LENGTH _WARN_  $    4;
 
******              LABELS FOR NEW VARIABLES              ******;
label _NODE_ = 'Node' ;
label _LEAF_ = 'Leaf' ;
label P_TARGET_B0 = 'Predicted: TARGET_B=0' ;
label P_TARGET_B1 = 'Predicted: TARGET_B=1' ;
label Q_TARGET_B0 = 'Unadjusted P: TARGET_B=0' ;
label Q_TARGET_B1 = 'Unadjusted P: TARGET_B=1' ;
label V_TARGET_B0 = 'Validated: TARGET_B=0' ;
label V_TARGET_B1 = 'Validated: TARGET_B=1' ;
label I_TARGET_B = 'Into: TARGET_B' ;
label U_TARGET_B = 'Unnormalized Into: TARGET_B' ;
label _WARN_ = 'Warnings' ;
 
 
******      TEMPORARY VARIABLES FOR FORMATTED VALUES      ******;
LENGTH _ARBFMT_12 $     12; DROP _ARBFMT_12;
_ARBFMT_12 = ' '; /* Initialize to avoid warning. */
LENGTH _ARBFMT_2 $      2; DROP _ARBFMT_2;
_ARBFMT_2 = ' '; /* Initialize to avoid warning. */
LENGTH _ARBFMT_3 $      3; DROP _ARBFMT_3;
_ARBFMT_3 = ' '; /* Initialize to avoid warning. */
 
 
******             ASSIGN OBSERVATION TO NODE             ******;
IF  NOT MISSING(GiftCnt36 ) AND
  GiftCnt36  <                  2.5 THEN DO;
  IF  NOT MISSING(DemMedHomeValue ) AND
    DemMedHomeValue  <                70000 THEN DO;
    IF  NOT MISSING(PromCnt12 ) AND
                      17.5 <= PromCnt12  THEN DO;
      _NODE_  =                   31;
      _LEAF_  =                    4;
      P_TARGET_B0  =     0.32432432432432;
      P_TARGET_B1  =     0.67567567567567;
      Q_TARGET_B0  =     0.32432432432432;
      Q_TARGET_B1  =     0.67567567567567;
      V_TARGET_B0  =     0.62790697674418;
      V_TARGET_B1  =     0.37209302325581;
      I_TARGET_B  = '1' ;
      U_TARGET_B  =                    1;
      END;
    ELSE DO;
      IF  NOT MISSING(GiftAvgCard36 ) AND
        GiftAvgCard36  <                 11.5 THEN DO;
        _ARBFMT_3 = PUT( DemHomeOwner , $3.);
         %DMNORMIP( _ARBFMT_3);
        IF _ARBFMT_3 IN ('U' ) THEN DO;
          _NODE_  =                   35;
          _LEAF_  =                    2;
          P_TARGET_B0  =     0.60344827586206;
          P_TARGET_B1  =     0.39655172413793;
          Q_TARGET_B0  =     0.60344827586206;
          Q_TARGET_B1  =     0.39655172413793;
          V_TARGET_B0  =     0.48387096774193;
          V_TARGET_B1  =     0.51612903225806;
          I_TARGET_B  = '0' ;
          U_TARGET_B  =                    0;
          END;
        ELSE DO;
          _NODE_  =                   34;
          _LEAF_  =                    1;
          P_TARGET_B0  =     0.37878787878787;
          P_TARGET_B1  =     0.62121212121212;
          Q_TARGET_B0  =     0.37878787878787;
          Q_TARGET_B1  =     0.62121212121212;
          V_TARGET_B0  =                  0.5;
          V_TARGET_B1  =                  0.5;
          I_TARGET_B  = '1' ;
          U_TARGET_B  =                    1;
          END;
        END;
      ELSE DO;
        _NODE_  =                   33;
        _LEAF_  =                    3;
        P_TARGET_B0  =     0.65703022339027;
        P_TARGET_B1  =     0.34296977660972;
        Q_TARGET_B0  =     0.65703022339027;
        Q_TARGET_B1  =     0.34296977660972;
        V_TARGET_B0  =     0.61242236024844;
        V_TARGET_B1  =     0.38757763975155;
        I_TARGET_B  = '0' ;
        U_TARGET_B  =                    0;
        END;
      END;
    END;
  ELSE DO;
    IF  NOT MISSING(GiftAvgAll ) AND
      GiftAvgAll  <                 5.32 THEN DO;
      _NODE_  =                   36;
      _LEAF_  =                    5;
      P_TARGET_B0  =     0.07142857142857;
      P_TARGET_B1  =     0.92857142857142;
      Q_TARGET_B0  =     0.07142857142857;
      Q_TARGET_B1  =     0.92857142857142;
      V_TARGET_B0  =     0.58333333333333;
      V_TARGET_B1  =     0.41666666666666;
      I_TARGET_B  = '1' ;
      U_TARGET_B  =                    1;
      END;
    ELSE DO;
      _NODE_  =                   37;
      _LEAF_  =                    6;
      P_TARGET_B0  =     0.54120267260579;
      P_TARGET_B1  =      0.4587973273942;
      Q_TARGET_B0  =     0.54120267260579;
      Q_TARGET_B1  =      0.4587973273942;
      V_TARGET_B0  =     0.54663422546634;
      V_TARGET_B1  =     0.45336577453365;
      I_TARGET_B  = '0' ;
      U_TARGET_B  =                    0;
      END;
    END;
  END;
ELSE DO;
  IF  NOT MISSING(GiftAvgLast ) AND
    GiftAvgLast  <                  7.5 THEN DO;
    IF  NOT MISSING(PromCnt12 ) AND
      PromCnt12  <                 10.5 THEN DO;
      _ARBFMT_2 = PUT( DemCluster , $2.);
       %DMNORMIP( _ARBFMT_2);
      IF _ARBFMT_2 IN ('24' ,'49' ) THEN DO;
        _NODE_  =                   40;
        _LEAF_  =                    7;
        P_TARGET_B0  =     0.57142857142857;
        P_TARGET_B1  =     0.42857142857142;
        Q_TARGET_B0  =     0.57142857142857;
        Q_TARGET_B1  =     0.42857142857142;
        V_TARGET_B0  =                  0.5;
        V_TARGET_B1  =                  0.5;
        I_TARGET_B  = '0' ;
        U_TARGET_B  =                    0;
        END;
      ELSE DO;
        _NODE_  =                   41;
        _LEAF_  =                    8;
        P_TARGET_B0  =     0.15841584158415;
        P_TARGET_B1  =     0.84158415841584;
        Q_TARGET_B0  =     0.15841584158415;
        Q_TARGET_B1  =     0.84158415841584;
        V_TARGET_B0  =     0.25263157894736;
        V_TARGET_B1  =     0.74736842105263;
        I_TARGET_B  = '1' ;
        U_TARGET_B  =                    1;
        END;
      END;
    ELSE DO;
      _NODE_  =                   39;
      _LEAF_  =                    9;
      P_TARGET_B0  =     0.38745387453874;
      P_TARGET_B1  =     0.61254612546125;
      Q_TARGET_B0  =     0.38745387453874;
      Q_TARGET_B1  =     0.61254612546125;
      V_TARGET_B0  =     0.35335689045936;
      V_TARGET_B1  =     0.64664310954063;
      I_TARGET_B  = '1' ;
      U_TARGET_B  =                    1;
      END;
    END;
  ELSE DO;
    IF  NOT MISSING(GiftTimeLast ) AND
      GiftTimeLast  <                 17.5 THEN DO;
      IF  NOT MISSING(DemMedHomeValue ) AND
                      124100 <= DemMedHomeValue  THEN DO;
        _NODE_  =                   45;
        _LEAF_  =                   12;
        P_TARGET_B0  =     0.30582524271844;
        P_TARGET_B1  =     0.69417475728155;
        Q_TARGET_B0  =     0.30582524271844;
        Q_TARGET_B1  =     0.69417475728155;
        V_TARGET_B0  =     0.41152263374485;
        V_TARGET_B1  =     0.58847736625514;
        I_TARGET_B  = '1' ;
        U_TARGET_B  =                    1;
        END;
      ELSE DO;
        _ARBFMT_12 = PUT( StatusCatStarAll , BEST12.);
         %DMNORMIP( _ARBFMT_12);
        IF _ARBFMT_12 IN ('0' ) THEN DO;
          _NODE_  =                   48;
          _LEAF_  =                   10;
          P_TARGET_B0  =     0.52577319587628;
          P_TARGET_B1  =     0.47422680412371;
          Q_TARGET_B0  =     0.52577319587628;
          Q_TARGET_B1  =     0.47422680412371;
          V_TARGET_B0  =     0.47752808988764;
          V_TARGET_B1  =     0.52247191011235;
          I_TARGET_B  = '0' ;
          U_TARGET_B  =                    0;
          END;
        ELSE DO;
          _NODE_  =                   49;
          _LEAF_  =                   11;
          P_TARGET_B0  =     0.41056910569105;
          P_TARGET_B1  =     0.58943089430894;
          Q_TARGET_B0  =     0.41056910569105;
          Q_TARGET_B1  =     0.58943089430894;
          V_TARGET_B0  =     0.41784989858012;
          V_TARGET_B1  =     0.58215010141987;
          I_TARGET_B  = '1' ;
          U_TARGET_B  =                    1;
          END;
        END;
      END;
    ELSE DO;
      IF  NOT MISSING(GiftAvgCard36 ) AND
        GiftAvgCard36  <               14.415 THEN DO;
        _NODE_  =                   46;
        _LEAF_  =                   13;
        P_TARGET_B0  =     0.47113884555382;
        P_TARGET_B1  =     0.52886115444617;
        Q_TARGET_B0  =     0.47113884555382;
        Q_TARGET_B1  =     0.52886115444617;
        V_TARGET_B0  =             0.496875;
        V_TARGET_B1  =             0.503125;
        I_TARGET_B  = '1' ;
        U_TARGET_B  =                    1;
        END;
      ELSE DO;
        IF  NOT MISSING(DemMedHomeValue ) AND
                         79500 <= DemMedHomeValue  THEN DO;
          _NODE_  =                   51;
          _LEAF_  =                   15;
          P_TARGET_B0  =     0.48369565217391;
          P_TARGET_B1  =     0.51630434782608;
          Q_TARGET_B0  =     0.48369565217391;
          Q_TARGET_B1  =     0.51630434782608;
          V_TARGET_B0  =                  0.5;
          V_TARGET_B1  =                  0.5;
          I_TARGET_B  = '1' ;
          U_TARGET_B  =                    1;
          END;
        ELSE DO;
          _NODE_  =                   50;
          _LEAF_  =                   14;
          P_TARGET_B0  =     0.68817204301075;
          P_TARGET_B1  =     0.31182795698924;
          Q_TARGET_B0  =     0.68817204301075;
          Q_TARGET_B1  =     0.31182795698924;
          V_TARGET_B0  =                  0.6;
          V_TARGET_B1  =                  0.4;
          I_TARGET_B  = '0' ;
          U_TARGET_B  =                    0;
          END;
        END;
      END;
    END;
  END;
 
****************************************************************;
******          END OF DECISION TREE SCORING CODE         ******;
****************************************************************;
 
drop _LEAF_;
